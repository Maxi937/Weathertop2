{{> menu id="dashboard"}}

<section class="ui segment">  
    {{#each stations}}
        <section class="ui vertical segment">
            {{#if readings}}
                {{> latest-station-reading weatherReport = (lookup ../weatherReports @index)}}
            {{else}}
                {{> empty-latest-reading-panel}}
            {{/if}}
        </section>
       
        {{! UI Buttons }}
        <section class="ui vertical segment">
        <a href="/station/{{id}}">
            <i class="bordered grey large link folder icon"></i>
        </a>
         <a href="/dashboard/deletestation/{{id}}">
            <i class="bordered grey large link trash icon"></i>
        </a>
    {{/each}}
</section>

<div id="map">

</div>

<section>
    {{> add-station}}
</section>

<script>
  const stationData = []
  const weatherData = []
    {{#each stations}}
      stationData.push({
        id: "{{id}}",
        name: "{{name}}",
        latitude: {{latitude}},
        longitude: {{longitude}},
      })
    {{/each}}
    {{#each weatherReports}}
      weatherData.push({
        icon: "{{weather.icon}}"
      })
    {{/each}}

  //Add weatherReport Data into stationData
  for (let i=0; i<stationData.length;i++){
    stationData[i].weatherReport = weatherData[i]
    console.log(stationData[i])
  }
  map.createMap(stationData)
</script>
